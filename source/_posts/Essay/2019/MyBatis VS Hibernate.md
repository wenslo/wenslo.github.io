---
title: MyBatis VS Hibernate

categories: 

- 随笔

tags: 

- ORM
date: 2019-04-11
---

&emsp;&emsp;很多公司招聘的时候都会说，掌握SSH/SSM其中一种。H指的就是Hibernate，M就是MyBatis。现在大部分的选择其实就是这两种。但是这两种框架有什么优缺点？选型的时候该如何进行选择？这其实是一个比较值得深究一下的问题。

&emsp;&emsp;从几个角度来对比一下他们之间的区别，先从**开发效率**的角度来说说。

&emsp;&emsp;如果数据库频繁改动，比如说某张表加字段了，需要自己去alter table修改，加一个字段改一次，如果创业初期，业务不明确，那么，修改字段的情况，是经常可能会发生的，那就意味着，需要在维护上付出很多的成本，而Hibernate在这方面，自动管理，手动维护的情况比较少，因此，**数据库表频繁改动的情况下，Hibernate完胜**。如果数据库表不频繁改动，比如说接项目的，或者说外包，合同里已经把所有的可能的字段都给描述清楚了，**在项目周期比较长的话，且不考虑二期甚至更后的情况下，Hibernate和MyBatis五五开吧**。但是说，没有哪个程序员，愿意把时间花费在这些琐碎的事情上（建表，加字段，加数据库字段注释）吧，至少说我不愿意，时间是有限的，精力也是有限的，这些无意义或者意义比较小的事情，对精力损耗非常大，因此，**我个人倾向于Hibernate**。

&emsp;&emsp;日常开发中，MyBatis的优点就是：**SQL全都都是手写，定制型极强，非常能体现出使用者的SQL水平**；写起来非常自由，各种表关联随心所欲，各种查询条件组合随心所欲；如果公司配置的有DBA的话，查询效率能够得到很大的保障。但是缺点的话也比较明显：参数返回一般就是两种，ResultMap和ResultType，前者返回一个map，使用者从map中取自己想要的数据，后者返回一个DTO，使用者需要自己定义Bean，同时，mapper.xml中也需要定义map映射，相对来说，比较费劲，工作量会比较大一点。**Hibernate在复杂查询方面，被MyBatis完爆；不过Hibernate在单表操作的话，完胜MyBatis。**虽然说MyBatis也有插件(Mybatis Plus ，MyBatis Plugin)等来生成对应的简单CURD，但是，还是上面说的，一旦字段改动频繁，那就是一个噩梦。

&emsp;&emsp;再从**执行效率**上对比一下。

&emsp;&emsp;MyBatis的天花板很高，地板也很低。天花板的话，就是DBA甚至更高。能够对每一个字段的效率控制到极致；地板的话，就是各种CV，直接select *的这种，各种嵌套查询，慢SQL。其实和数据库了解程度有点关系，但是说MyBatis里写SQL有两种方式，第一种写mapper.xml里，第二种就是写注解里，项目小而简单的话还好，一旦有了点复杂度，写的还不规范，估计没人想看，间接会导致成本增加。

&emsp;&emsp;Hibernate的话，如果不做配置，每次查询，都是所有字段全部查询出来，如果表里有大字段(TEXT)，那速度和MyBatis只查某些具体字段，压根没得比。也就是说，Hibernate需要了解的东西更多，如果不了解，只单纯最基本的用的话，执行效率和MyBAtis差不多，但是随着字段变大变多，如果不做配置，肯定不如说按需查询所来的速度快。当然，如果有足够的知识储备的话，Hierbnate速度并不慢。

&emsp;&emsp;再从**学习成本**对比一下。

&emsp;&emsp;MyBatis的一大特点就是：上手速度极快，看几眼，就能够直接上手，门槛极低。而Hibernate相对来说，难一点。但是并不是说Hibernate就死难学，只是有一定的曲线而已，毕竟Hibernate是全自动ORM，而MyBatis是半自动ORM。

&emsp;&emsp;我的结论是：如果是外包这种，查询，插入数据量大，表关联复杂，MyBatis来的合适。如果是微服务这种，单表操作比较多，Hibernate来的合适。如果说数据库确定不会迁移，需要用到数据库底层功能，那么MyBatis来的合适，就比如说Oracle。如果说屏蔽数据库底层细节，那么Hibernate来的合适。

&emsp;&emsp;不过两者有个共同点，那就是数据库相关只是得熟。从零开始的项目的话，我会选择Hibernate(JPA)，如果说遗留项目，用的MyBatis，那就继续用吧，写的好的话，后来人写的也舒服。有DBA的话，用MyBatis不要太爽，没有的话，就只能看开发人员水平。
