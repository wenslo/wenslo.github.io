---
title: MySQL的Schema和数据类型优化

categories: 

- MySQL

tags: 

- MySQL
date: 2020-12-16 17:30:57
---

| 1. 选择数据类型时候的基本原则

1. **更小的通常更好**，占用更少的磁盘，内存和CPU缓存，处理时需要的CPU时钟周期也少，但是不建议项目初期就弄，不然改起来也太费劲了，超级痛苦。
2. **简单的更好**，比如能使用整形就不适用字符，能用date就不用字符串，因为字符集和排序规则使得字符串相比整形复杂。
3. **避免为null**，滴滴的数据表，全都是not null的，因为有null的列更难优化，耗费的成本更高，索引，统计更麻烦，浪费更多的存储空间，

| 1.1 整数类型

分为两种，整数（real number）和实数（real number），整数有这么几种：**TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT**，分别使用8，16，24，32，64位存储空间，存储的值为 -2^n-1 到 2^(n-1)-1，同时有可选的**UNSIGNED**属性，不允许负值，可以将正数上限提高一倍。**INT(11)**不会限制值的合法范围，只是规定了一些交互工具显示字符的个数。

| 1.2 实数类型

DECIMAL可以存比BIGINT更大的整数，也可以存储精确的小数，**CPU原生支持浮点运算，但是DECIMAL需要MySQL实现，因此浮点比DECIMAL运算更快。decimal计算中，会转换为double，因此，虽然DECIAML支持65个数字，但是实际上并不支持**。同时，建议选择数据类型，不建议选择decimal的精度。可以使用BIGINT取代decimal，避免运算代价过高。


