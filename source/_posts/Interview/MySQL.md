---
title: 面试-MySQL篇

categories: 

- 面试

tags: 

- 面试
date: 2020-11-16 22:53:54

---

### 想提升，还是得连环炮方式的提问

1. 你们对线上的数据有没有做一些优化？怎么优化的？

   1. 如果回答的是索引

      1. 来说一说什么是索引？有哪几种索引？索引有什么优点？

         用于存储引擎快速找到记录的一种数据结构，存储引擎会先在索引中找到对应值，然后根据匹配的索引记录找到对应的记录行，索引可以包含一个或者多个列的值

         B-Tree索引，（准确的说是B+Tree，B-Tree和B+Tree有什么区别？）哈希索引，空间数据索引，全文索引，分行树索引

         优点：1.大大减少服务器需要扫描的数据量，2.可以帮助服务器避免排序和临时变，3.索引可以将随机IO变为顺序IO。

      2. 这些索引采取的是哪种数据结构？

         B-Tree索引用的B+Tree，哈希索引用的哈希表

      3. 为什么采取B+Tree？这种数据结构有什么好处么？

         B+Tree对索引列是按照顺序组织存储的，适用于**全值匹配，匹配最左前缀，匹配列前缀，匹配范围值，精确匹配某一列并范围匹配另外一列，只访问索引的查询**。因为节点有序，还可用于查询中的order by操作。

         但是，如果**不是按照索引的最左列开始查找，则无法使用索引；不能跳过索引中的列；如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查找**。

      4. 和哈希表相比，有什么优点或者有什么不同？

         Hash索引基于哈希表，会在哈希表中保存指向每个数据行的指针，**只有精确匹配索引所有列的查询才有效**。但是Hash并不是就一定会很快，因为hash值重复的话，会以链表的方式存放多个记录指针到一个条目中，所以说，极端情况下，会变成为链表。

      5. MySQL中B+Tree的叶子节点能存什么东西？

         首先，叶子节点会有索引列的数据，其次，B+Tree的叶子节点会保存数据行，MySQL中会保存数据库表的主键值，也就聚簇索引（如果没有，首先会选择一个唯一的非空索引来代替，如果还没有，会隐式定义一个主键作为聚簇索引），然后会根据主键，进行回表，获取所需数据。

      6. 什么是聚簇索引和非聚簇索引？

      7. 查询的时候有什么区别？

      8. 为什么？

      9. 联合索引是怎么使用的？为什么使用联合索引？

      10. 说一说最左前缀匹配

      11. 各个MySQL版本中，对索引有哪些方面的优化？

      12. 通过什么情况，能知道是否走了索引？

      13. 什么情况下会发生创建了索引，但是没有走索引的情况？

      14. 为什么？

      15. 不同类型的值，比如说varchar，int，等，使用索引会有什么变化？

      16. 如果table的column使用的是int，但是查询条件是varchar，会不会走索引？为什么？

   2. 加缓存，memcache，redis等

   3. 主从复制，或者主主复制，读写分离

   4. 分区表

   5. 垂直拆分

   6. 水平拆分

